<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" 
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    
    <title>Movie Collection</title>
    
  </head>

  <body>

    <div class="container my-4">

    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <div class="container-fluid">
        <span class="navbar-brand mb-0 h1">
          <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/2b/Eo_circle_light-blue_film-camera.svg/480px-Eo_circle_light-blue_film-camera.svg.png" alt="" width="60" height="60">
            Movie Collection</span>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
            <div class="navbar-nav">
              <a class="nav-link" href="/">Home</a>
              <a class="nav-link" href="/search">Search for movies</a>
            </div>
          </div>
      </div>
    </nav>
    </div>

    {{{body}}}
    
    <div class="container my-4">

      {{#if finalResult.data}}
          Page {{finalResult.pagination.page}} of {{finalResult.pagination.pagecount}}
      
      
        <br><br><br>

        <!--Adding the movie list-->
        {{#each finalResult.data}}
          <p>
            <img src= https://image.tmdb.org/t/p/w500{{poster_path}}><br>
            <h5>Title: <a href="/movies/{{_id}}">{{title}}</a></h5>
            Rating: {{vote_average}} ({{vote_count}} votes)<br>
            Genres: {{genres}}<br>
            Production countries: {{production_countries}}<br>
            Overview: {{overview}}<br><br><br><br><br>
          </p>
        {{/each}}


        
        <!--Pagination-->
        <nav aria-label="Page navigation example">
          <ul class="pagination justify-content-center">
            {{#if finalResult.pagination.previousPage}}
              <li class="page-item"><a class="page-link" href="{{url}}page={{finalResult.pagination.previousPage}}">Previous</a></li>
            {{else}}
              <li class="page-item disabled"><a class="page-link">Previous</a></li>
            {{/if}}
            {{#if finalResult.pagination.previousPage}}
              <li class="page-item"><a class="page-link" href="{{url}}page=1">1</a></li>
            {{/if}}
            <li class="page-item disabled"><a class="page-link">...</a></li>
            <li class="page-item active" aria-current="page"><span class="page-link">{{finalResult.pagination.page}}</span></li>
            <li class="page-item disabled"><a class="page-link">...</a></li>
            <li class="page-item"><a class="page-link" href="{{url}}page={{finalResult.pagination.pagecount}}">{{finalResult.pagination.pagecount}}</a></li>

            {{#if finalResult.pagination.nextPage}}
              <li class="page-item"><a class="page-link" href="{{url}}page={{finalResult.pagination.nextPage}}">Next</a></li>
            {{else}}
              <li class="page-item disabled"><a class="page-link">Next</a></li>
            {{/if}}
          </ul>
        </nav>
      
      {{/if}}
    </div>

  </body>
</html>